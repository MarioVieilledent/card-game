var pn=Object.defineProperty;var gn=(n,t,e)=>t in n?pn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var O=(n,t,e)=>(gn(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function Z(){}function xe(n){return n()}function ce(){return Object.create(null)}function Pt(n){n.forEach(xe)}function Qt(n){return typeof n=="function"}function Ae(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function yn(n){return Object.keys(n).length===0}function mn(n){return n&&Qt(n.destroy)?n.destroy:Z}function Te(n,t,e){n.insertBefore(t,e||null)}function Xt(n){n.parentNode&&n.parentNode.removeChild(n)}function Ce(n){return document.createElement(n)}function qt(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function vn(n){return Array.from(n.childNodes)}let wt;function bt(n){wt=n}function bn(){if(!wt)throw new Error("Function called outside component initialization");return wt}function wn(n){bn().$$.on_mount.push(n)}const ht=[],he=[],Rt=[],ue=[],En=Promise.resolve();let Ft=!1;function Sn(){Ft||(Ft=!0,En.then(Re))}function Vt(n){Rt.push(n)}const Ht=new Set;let ct=0;function Re(){if(ct!==0)return;const n=wt;do{try{for(;ct<ht.length;){const t=ht[ct];ct++,bt(t),kn(t.$$)}}catch(t){throw ht.length=0,ct=0,t}for(bt(null),ht.length=0,ct=0;he.length;)he.pop()();for(let t=0;t<Rt.length;t+=1){const e=Rt[t];Ht.has(e)||(Ht.add(e),e())}Rt.length=0}while(ht.length);for(;ue.length;)ue.pop()();Ft=!1,Ht.clear(),bt(n)}function kn(n){if(n.fragment!==null){n.update(),Pt(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Vt)}}const Ot=new Set;let _n;function Oe(n,t){n&&n.i&&(Ot.delete(n),n.i(t))}function xn(n,t,e,i){if(n&&n.o){if(Ot.has(n))return;Ot.add(n),_n.c.push(()=>{Ot.delete(n),i&&(e&&n.d(1),i())}),n.o(t)}else i&&i()}function An(n){n&&n.c()}function Le(n,t,e,i){const{fragment:r,after_update:s}=n.$$;r&&r.m(t,e),i||Vt(()=>{const a=n.$$.on_mount.map(xe).filter(Qt);n.$$.on_destroy?n.$$.on_destroy.push(...a):Pt(a),n.$$.on_mount=[]}),s.forEach(Vt)}function Ne(n,t){const e=n.$$;e.fragment!==null&&(Pt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Tn(n,t){n.$$.dirty[0]===-1&&(ht.push(n),Sn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Be(n,t,e,i,r,s,a,h=[-1]){const d=wt;bt(n);const c=n.$$={fragment:null,ctx:[],props:s,update:Z,not_equal:r,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:ce(),dirty:h,skip_bound:!1,root:t.target||d.$$.root};a&&a(c.root);let p=!1;if(c.ctx=e?e(n,t.props||{},(g,C,...k)=>{const w=k.length?k[0]:C;return c.ctx&&r(c.ctx[g],c.ctx[g]=w)&&(!c.skip_bound&&c.bound[g]&&c.bound[g](w),p&&Tn(n,g)),C}):[],c.update(),p=!0,Pt(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const g=vn(t.target);c.fragment&&c.fragment.l(g),g.forEach(Xt)}else c.fragment&&c.fragment.c();t.intro&&Oe(n.$$.fragment),Le(n,t.target,t.anchor,t.customElement),Re()}bt(d)}class Ie{$destroy(){Ne(this,1),this.$destroy=Z}$on(t,e){if(!Qt(e))return Z;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const r=i.indexOf(e);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!yn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var It={},Cn={get exports(){return It},set exports(n){It=n}},Rn=Cn.exports={};Rn.forEach=function(n,t){for(var e=0;e<n.length;e++){var i=t(n[e]);if(i)return i}};var On=function(n){var t=n.stateHandler.getState;function e(a){var h=t(a);return h&&!!h.isDetectable}function i(a){t(a).isDetectable=!0}function r(a){return!!t(a).busy}function s(a,h){t(a).busy=!!h}return{isDetectable:e,markAsDetectable:i,isBusy:r,markBusy:s}},Ln=function(n){var t={};function e(a){var h=n.get(a);return h===void 0?[]:t[h]||[]}function i(a,h){var d=n.get(a);t[d]||(t[d]=[]),t[d].push(h)}function r(a,h){for(var d=e(a),c=0,p=d.length;c<p;++c)if(d[c]===h){d.splice(c,1);break}}function s(a){var h=e(a);h&&(h.length=0)}return{get:e,add:i,removeListener:r,removeAllListeners:s}},Nn=function(){var n=1;function t(){return n++}return{generate:t}},Bn=function(n){var t=n.idGenerator,e=n.stateHandler.getState;function i(s){var a=e(s);return a&&a.id!==void 0?a.id:null}function r(s){var a=e(s);if(!a)throw new Error("setId required the element to have a resize detection state.");var h=t.generate();return a.id=h,h}return{get:i,set:r}},In=function(n){function t(){}var e={log:t,warn:t,error:t};if(!n&&window.console){var i=function(r,s){r[s]=function(){var h=console[s];if(h.apply)h.apply(console,arguments);else for(var d=0;d<arguments.length;d++)h(arguments[d])}};i(e,"log"),i(e,"warn"),i(e,"error")}return e},Dt={},Dn={get exports(){return Dt},set exports(n){Dt=n}},De=Dn.exports={};De.isIE=function(n){function t(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!t())return!1;if(!n)return!0;var e=function(){var i,r=3,s=document.createElement("div"),a=s.getElementsByTagName("i");do s.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(a[0]);return r>4?r:i}();return n===e};De.isLegacyOpera=function(){return!!window.opera};var Ut={},Pn={get exports(){return Ut},set exports(n){Ut=n}},Mn=Pn.exports={};Mn.getOption=zn;function zn(n,t,e){var i=n[t];return i==null&&e!==void 0?e:i}var le=Ut,Hn=function(t){t=t||{};var e=t.reporter,i=le.getOption(t,"async",!0),r=le.getOption(t,"auto",!0);r&&!i&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),i=!0);var s=fe(),a,h=!1;function d(w,I){!h&&r&&i&&s.size()===0&&g(),s.add(w,I)}function c(){for(h=!0;s.size();){var w=s;s=fe(),w.process()}h=!1}function p(w){h||(w===void 0&&(w=i),a&&(C(a),a=null),w?g():c())}function g(){a=k(c)}function C(w){var I=clearTimeout;return I(w)}function k(w){var I=function(F){return setTimeout(F,0)};return I(w)}return{add:d,force:p}};function fe(){var n={},t=0,e=0,i=0;function r(h,d){d||(d=h,h=0),h>e?e=h:h<i&&(i=h),n[h]||(n[h]=[]),n[h].push(d),t++}function s(){for(var h=i;h<=e;h++)for(var d=n[h],c=0;c<d.length;c++){var p=d[c];p()}}function a(){return t}return{add:r,process:s,size:a}}var Gt="_erd";function $n(n){return n[Gt]={},Pe(n)}function Pe(n){return n[Gt]}function qn(n){delete n[Gt]}var Fn={initState:$n,getState:Pe,cleanState:qn},pt=Dt,Vn=function(n){n=n||{};var t=n.reporter,e=n.batchProcessor,i=n.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function r(c,p){function g(){p(c)}if(pt.isIE(8))i(c).object={proxy:g},c.attachEvent("onresize",g);else{var C=h(c);if(!C)throw new Error("Element is not detectable by this strategy.");C.contentDocument.defaultView.addEventListener("resize",g)}}function s(c){var p=n.important?" !important; ":"; ";return(c.join(p)+p).trim()}function a(c,p,g){g||(g=p,p=c,c=null),c=c||{},c.debug;function C(k,w){var I=s(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),F=!1,V=window.getComputedStyle(k),A=k.offsetWidth,T=k.offsetHeight;i(k).startSize={width:A,height:T};function f(){function o(){if(V.position==="static"){k.style.setProperty("position","relative",c.important?"important":"");var R=function(D,S,B,m){function E(P){return P.replace(/[^-\d\.]/g,"")}var z=B[m];z!=="auto"&&E(z)!=="0"&&(D.warn("An element that is positioned static has style."+m+"="+z+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+m+" will be set to 0. Element: ",S),S.style.setProperty(m,"0",c.important?"important":""))};R(t,k,V,"top"),R(t,k,V,"right"),R(t,k,V,"bottom"),R(t,k,V,"left")}}function _(){F||o();function R(S,B){if(!S.contentDocument){var m=i(S);m.checkForObjectDocumentTimeoutId&&window.clearTimeout(m.checkForObjectDocumentTimeoutId),m.checkForObjectDocumentTimeoutId=setTimeout(function(){m.checkForObjectDocumentTimeoutId=0,R(S,B)},100);return}B(S.contentDocument)}var D=this;R(D,function(B){w(k)})}V.position!==""&&(o(),F=!0);var u=document.createElement("object");u.style.cssText=I,u.tabIndex=-1,u.type="text/html",u.setAttribute("aria-hidden","true"),u.onload=_,pt.isIE()||(u.data="about:blank"),i(k)&&(k.appendChild(u),i(k).object=u,pt.isIE()&&(u.data="about:blank"))}e?e.add(f):f()}pt.isIE(8)?g(p):C(p,g)}function h(c){return i(c).object}function d(c){if(i(c)){var p=h(c);p&&(pt.isIE(8)?c.detachEvent("onresize",p.proxy):c.removeChild(p),i(c).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(c).checkForObjectDocumentTimeoutId),delete i(c).object)}}return{makeDetectable:a,addListener:r,uninstall:d}},Un=It.forEach,Wn=function(n){n=n||{};var t=n.reporter,e=n.batchProcessor,i=n.stateHandler.getState;n.stateHandler.hasState;var r=n.idHandler;if(!e)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var s=p(),a="erd_scroll_detection_scrollbar_style",h="erd_scroll_detection_container";function d(f){g(f,a,h)}d(window.document);function c(f){var o=n.important?" !important; ":"; ";return(f.join(o)+o).trim()}function p(){var f=500,o=500,_=document.createElement("div");_.style.cssText=c(["position: absolute","width: "+f*2+"px","height: "+o*2+"px","visibility: hidden","margin: 0","padding: 0"]);var u=document.createElement("div");u.style.cssText=c(["position: absolute","width: "+f+"px","height: "+o+"px","overflow: scroll","visibility: none","top: "+-f*3+"px","left: "+-o*3+"px","visibility: hidden","margin: 0","padding: 0"]),u.appendChild(_),document.body.insertBefore(u,document.body.firstChild);var R=f-u.clientWidth,D=o-u.clientHeight;return document.body.removeChild(u),{width:R,height:D}}function g(f,o,_){function u(B,m){m=m||function(z){f.head.appendChild(z)};var E=f.createElement("style");return E.innerHTML=B,E.id=o,m(E),E}if(!f.getElementById(o)){var R=_+"_animation",D=_+"_animation_active",S=`/* Created by the element-resize-detector library. */
`;S+="."+_+" > div::-webkit-scrollbar { "+c(["display: none"])+` }

`,S+="."+D+" { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+R,"animation-name: "+R])+` }
`,S+="@-webkit-keyframes "+R+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,S+="@keyframes "+R+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",u(S)}}function C(f){f.className+=" "+h+"_animation_active"}function k(f,o,_){if(f.addEventListener)f.addEventListener(o,_);else if(f.attachEvent)f.attachEvent("on"+o,_);else return t.error("[scroll] Don't know how to add event listeners.")}function w(f,o,_){if(f.removeEventListener)f.removeEventListener(o,_);else if(f.detachEvent)f.detachEvent("on"+o,_);else return t.error("[scroll] Don't know how to remove event listeners.")}function I(f){return i(f).container.childNodes[0].childNodes[0].childNodes[0]}function F(f){return i(f).container.childNodes[0].childNodes[0].childNodes[1]}function V(f,o){var _=i(f).listeners;if(!_.push)throw new Error("Cannot add listener to an element that is not detectable.");i(f).listeners.push(o)}function A(f,o,_){_||(_=o,o=f,f=null),f=f||{};function u(){if(f.debug){var l=Array.prototype.slice.call(arguments);if(l.unshift(r.get(o),"Scroll: "),t.log.apply)t.log.apply(null,l);else for(var v=0;v<l.length;v++)t.log(l[v])}}function R(l){function v(x){var U=x.getRootNode&&x.getRootNode().contains(x);return x===x.ownerDocument.body||x.ownerDocument.body.contains(x)||U}return!v(l)||window.getComputedStyle(l)===null}function D(l){var v=i(l).container.childNodes[0],x=window.getComputedStyle(v);return!x.width||x.width.indexOf("px")===-1}function S(){var l=window.getComputedStyle(o),v={};return v.position=l.position,v.width=o.offsetWidth,v.height=o.offsetHeight,v.top=l.top,v.right=l.right,v.bottom=l.bottom,v.left=l.left,v.widthCSS=l.width,v.heightCSS=l.height,v}function B(){var l=S();i(o).startSize={width:l.width,height:l.height},u("Element start size",i(o).startSize)}function m(){i(o).listeners=[]}function E(){if(u("storeStyle invoked."),!i(o)){u("Aborting because element has been uninstalled");return}var l=S();i(o).style=l}function z(l,v,x){i(l).lastWidth=v,i(l).lastHeight=x}function P(l){return I(l).childNodes[0]}function tt(){return 2*s.width+1}function Et(){return 2*s.height+1}function St(l){return l+10+tt()}function kt(l){return l+10+Et()}function sn(l){return l*2+tt()}function on(l){return l*2+Et()}function ee(l,v,x){var U=I(l),et=F(l),rt=St(v),st=kt(x),M=sn(v),b=on(x);U.scrollLeft=rt,U.scrollTop=st,et.scrollLeft=M,et.scrollTop=b}function ne(){var l=i(o).container;if(!l){l=document.createElement("div"),l.className=h,l.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(o).container=l,C(l),o.appendChild(l);var v=function(){i(o).onRendered&&i(o).onRendered()};k(l,"animationstart",v),i(o).onAnimationStart=v}return l}function an(){function l(){var N=i(o).style;if(N.position==="static"){o.style.setProperty("position","relative",f.important?"important":"");var J=function(at,it,ln,xt){function fn(dn){return dn.replace(/[^-\d\.]/g,"")}var zt=ln[xt];zt!=="auto"&&fn(zt)!=="0"&&(at.warn("An element that is positioned static has style."+xt+"="+zt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+xt+" will be set to 0. Element: ",it),it.style[xt]=0)};J(t,o,N,"top"),J(t,o,N,"right"),J(t,o,N,"bottom"),J(t,o,N,"left")}}function v(N,J,at,it){return N=N?N+"px":"0",J=J?J+"px":"0",at=at?at+"px":"0",it=it?it+"px":"0",["left: "+N,"top: "+J,"right: "+it,"bottom: "+at]}if(u("Injecting elements"),!i(o)){u("Aborting because element has been uninstalled");return}l();var x=i(o).container;x||(x=ne());var U=s.width,et=s.height,rt=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),st=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(v(-(1+U),-(1+et),-et,-U))),M=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),b=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),H=c(["position: absolute","left: 0","top: 0"]),nt=c(["position: absolute","width: 200%","height: 200%"]),K=document.createElement("div"),Y=document.createElement("div"),ot=document.createElement("div"),re=document.createElement("div"),_t=document.createElement("div"),se=document.createElement("div");K.dir="ltr",K.style.cssText=rt,K.className=h,Y.className=h,Y.style.cssText=st,ot.style.cssText=M,re.style.cssText=H,_t.style.cssText=b,se.style.cssText=nt,ot.appendChild(re),_t.appendChild(se),Y.appendChild(ot),Y.appendChild(_t),K.appendChild(Y),x.appendChild(K);function oe(){var N=i(o);N&&N.onExpand?N.onExpand():u("Aborting expand scroll handler: element has been uninstalled")}function ae(){var N=i(o);N&&N.onShrink?N.onShrink():u("Aborting shrink scroll handler: element has been uninstalled")}k(ot,"scroll",oe),k(_t,"scroll",ae),i(o).onExpandScroll=oe,i(o).onShrinkScroll=ae}function cn(){function l(M,b,H){var nt=P(M),K=St(b),Y=kt(H);nt.style.setProperty("width",K+"px",f.important?"important":""),nt.style.setProperty("height",Y+"px",f.important?"important":"")}function v(M){var b=o.offsetWidth,H=o.offsetHeight,nt=b!==i(o).lastWidth||H!==i(o).lastHeight;u("Storing current size",b,H),z(o,b,H),e.add(0,function(){if(nt){if(!i(o)){u("Aborting because element has been uninstalled");return}if(!x()){u("Aborting because element container has not been initialized");return}if(f.debug){var Y=o.offsetWidth,ot=o.offsetHeight;(Y!==b||ot!==H)&&t.warn(r.get(o),"Scroll: Size changed before updating detector elements.")}l(o,b,H)}}),e.add(1,function(){if(!i(o)){u("Aborting because element has been uninstalled");return}if(!x()){u("Aborting because element container has not been initialized");return}ee(o,b,H)}),nt&&M&&e.add(2,function(){if(!i(o)){u("Aborting because element has been uninstalled");return}if(!x()){u("Aborting because element container has not been initialized");return}M()})}function x(){return!!i(o).container}function U(){function M(){return i(o).lastNotifiedWidth===void 0}u("notifyListenersIfNeeded invoked");var b=i(o);if(M()&&b.lastWidth===b.startSize.width&&b.lastHeight===b.startSize.height)return u("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(b.lastWidth===b.lastNotifiedWidth&&b.lastHeight===b.lastNotifiedHeight)return u("Not notifying: Size already notified");u("Current size not notified, notifying..."),b.lastNotifiedWidth=b.lastWidth,b.lastNotifiedHeight=b.lastHeight,Un(i(o).listeners,function(H){H(o)})}function et(){if(u("startanimation triggered."),D(o)){u("Ignoring since element is still unrendered...");return}u("Element rendered.");var M=I(o),b=F(o);(M.scrollLeft===0||M.scrollTop===0||b.scrollLeft===0||b.scrollTop===0)&&(u("Scrollbars out of sync. Updating detector elements..."),v(U))}function rt(){if(u("Scroll detected."),D(o)){u("Scroll event fired while unrendered. Ignoring...");return}v(U)}if(u("registerListenersAndPositionElements invoked."),!i(o)){u("Aborting because element has been uninstalled");return}i(o).onRendered=et,i(o).onExpand=rt,i(o).onShrink=rt;var st=i(o).style;l(o,st.width,st.height)}function hn(){if(u("finalizeDomMutation invoked."),!i(o)){u("Aborting because element has been uninstalled");return}var l=i(o).style;z(o,l.width,l.height),ee(o,l.width,l.height)}function un(){_(o)}function ie(){u("Installing..."),m(),B(),e.add(0,E),e.add(1,an),e.add(2,cn),e.add(3,hn),e.add(4,un)}u("Making detectable..."),R(o)?(u("Element is detached"),ne(),u("Waiting until element is attached..."),i(o).onRendered=function(){u("Element is now attached"),ie()}):ie()}function T(f){var o=i(f);o&&(o.onExpandScroll&&w(I(f),"scroll",o.onExpandScroll),o.onShrinkScroll&&w(F(f),"scroll",o.onShrinkScroll),o.onAnimationStart&&w(o.container,"animationstart",o.onAnimationStart),o.container&&f.removeChild(o.container))}return{makeDetectable:A,addListener:V,uninstall:T,initDocument:d}},yt=It.forEach,jn=On,Kn=Ln,Yn=Nn,Jn=Bn,Qn=In,de=Dt,Xn=Hn,Q=Fn,Gn=Vn,Zn=Wn;function pe(n){return Array.isArray(n)||n.length!==void 0}function ge(n){if(Array.isArray(n))return n;var t=[];return yt(n,function(e){t.push(e)}),t}function ye(n){return n&&n.nodeType===1}var ti=function(n){n=n||{};var t;if(n.idHandler)t={get:function(A){return n.idHandler.get(A,!0)},set:n.idHandler.set};else{var e=Yn(),i=Jn({idGenerator:e,stateHandler:Q});t=i}var r=n.reporter;if(!r){var s=r===!1;r=Qn(s)}var a=X(n,"batchProcessor",Xn({reporter:r})),h={};h.callOnAdd=!!X(n,"callOnAdd",!0),h.debug=!!X(n,"debug",!1);var d=Kn(t),c=jn({stateHandler:Q}),p,g=X(n,"strategy","object"),C=X(n,"important",!1),k={reporter:r,batchProcessor:a,stateHandler:Q,idHandler:t,important:C};if(g==="scroll"&&(de.isLegacyOpera()?(r.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),g="object"):de.isIE(9)&&(r.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),g="object")),g==="scroll")p=Zn(k);else if(g==="object")p=Gn(k);else throw new Error("Invalid strategy name: "+g);var w={};function I(A,T,f){function o(B){var m=d.get(B);yt(m,function(z){z(B)})}function _(B,m,E){d.add(m,E),B&&E(m)}if(f||(f=T,T=A,A={}),!T)throw new Error("At least one element required.");if(!f)throw new Error("Listener required.");if(ye(T))T=[T];else if(pe(T))T=ge(T);else return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var u=0,R=X(A,"callOnAdd",h.callOnAdd),D=X(A,"onReady",function(){}),S=X(A,"debug",h.debug);yt(T,function(m){Q.getState(m)||(Q.initState(m),t.set(m));var E=t.get(m);if(S&&r.log("Attaching listener to element",E,m),!c.isDetectable(m)){if(S&&r.log(E,"Not detectable."),c.isBusy(m)){S&&r.log(E,"System busy making it detectable"),_(R,m,f),w[E]=w[E]||[],w[E].push(function(){u++,u===T.length&&D()});return}return S&&r.log(E,"Making detectable..."),c.markBusy(m,!0),p.makeDetectable({debug:S,important:C},m,function(P){if(S&&r.log(E,"onElementDetectable"),Q.getState(P)){c.markAsDetectable(P),c.markBusy(P,!1),p.addListener(P,o),_(R,P,f);var tt=Q.getState(P);if(tt&&tt.startSize){var Et=P.offsetWidth,St=P.offsetHeight;(tt.startSize.width!==Et||tt.startSize.height!==St)&&o(P)}w[E]&&yt(w[E],function(kt){kt()})}else S&&r.log(E,"Element uninstalled before being detectable.");delete w[E],u++,u===T.length&&D()})}S&&r.log(E,"Already detecable, adding listener."),_(R,m,f),u++}),u===T.length&&D()}function F(A){if(!A)return r.error("At least one element is required.");if(ye(A))A=[A];else if(pe(A))A=ge(A);else return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");yt(A,function(T){d.removeAllListeners(T),p.uninstall(T),Q.cleanState(T)})}function V(A){p.initDocument&&p.initDocument(A)}return{listenTo:I,removeListener:d.removeListener,removeAllListeners:d.removeAllListeners,uninstall:F,initDocument:V}};function X(n,t,e){var i=n[t];return i==null&&e!==void 0?e:i}var At=ti({strategy:"scroll"});function ei(n,t){At.listenTo(n,t);var e=t;return{update:function(i){At.removeListener(n,e),At.listenTo(n,i),e=i},destroy:function(){At.removeListener(n,e)}}}const j=Object.create(null);j.open="0";j.close="1";j.ping="2";j.pong="3";j.message="4";j.upgrade="5";j.noop="6";const Lt=Object.create(null);Object.keys(j).forEach(n=>{Lt[j[n]]=n});const ni={type:"error",data:"parser error"},ii=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ri=typeof ArrayBuffer=="function",si=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,Me=({type:n,data:t},e,i)=>ii&&t instanceof Blob?e?i(t):me(t,i):ri&&(t instanceof ArrayBuffer||si(t))?e?i(t):me(new Blob([t]),i):i(j[n]+(t||"")),me=(n,t)=>{const e=new FileReader;return e.onload=function(){const i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(n)},ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<ve.length;n++)mt[ve.charCodeAt(n)]=n;const oi=n=>{let t=n.length*.75,e=n.length,i,r=0,s,a,h,d;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);const c=new ArrayBuffer(t),p=new Uint8Array(c);for(i=0;i<e;i+=4)s=mt[n.charCodeAt(i)],a=mt[n.charCodeAt(i+1)],h=mt[n.charCodeAt(i+2)],d=mt[n.charCodeAt(i+3)],p[r++]=s<<2|a>>4,p[r++]=(a&15)<<4|h>>2,p[r++]=(h&3)<<6|d&63;return c},ai=typeof ArrayBuffer=="function",ze=(n,t)=>{if(typeof n!="string")return{type:"message",data:He(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:ci(n.substring(1),t)}:Lt[e]?n.length>1?{type:Lt[e],data:n.substring(1)}:{type:Lt[e]}:ni},ci=(n,t)=>{if(ai){const e=oi(n);return He(e,t)}else return{base64:!0,data:n}},He=(n,t)=>{switch(t){case"blob":return n instanceof ArrayBuffer?new Blob([n]):n;case"arraybuffer":default:return n}},$e=String.fromCharCode(30),hi=(n,t)=>{const e=n.length,i=new Array(e);let r=0;n.forEach((s,a)=>{Me(s,!1,h=>{i[a]=h,++r===e&&t(i.join($e))})})},ui=(n,t)=>{const e=n.split($e),i=[];for(let r=0;r<e.length;r++){const s=ze(e[r],t);if(i.push(s),s.type==="error")break}return i},qe=4;function L(n){if(n)return li(n)}function li(n){for(var t in L.prototype)n[t]=L.prototype[t];return n}L.prototype.on=L.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};L.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};L.prototype.off=L.prototype.removeListener=L.prototype.removeAllListeners=L.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var i,r=0;r<e.length;r++)if(i=e[r],i===t||i.fn===t){e.splice(r,1);break}return e.length===0&&delete this._callbacks["$"+n],this};L.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,r=e.length;i<r;++i)e[i].apply(this,t)}return this};L.prototype.emitReserved=L.prototype.emit;L.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};L.prototype.hasListeners=function(n){return!!this.listeners(n).length};const G=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function Fe(n,...t){return t.reduce((e,i)=>(n.hasOwnProperty(i)&&(e[i]=n[i]),e),{})}const fi=setTimeout,di=clearTimeout;function Mt(n,t){t.useNativeTimers?(n.setTimeoutFn=fi.bind(G),n.clearTimeoutFn=di.bind(G)):(n.setTimeoutFn=setTimeout.bind(G),n.clearTimeoutFn=clearTimeout.bind(G))}const pi=1.33;function gi(n){return typeof n=="string"?yi(n):Math.ceil((n.byteLength||n.size)*pi)}function yi(n){let t=0,e=0;for(let i=0,r=n.length;i<r;i++)t=n.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}class mi extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class Ve extends L{constructor(t){super(),this.writable=!1,Mt(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new mi(t,e,i)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=ze(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const Ue="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Wt=64,vi={};let be=0,Tt=0,we;function Ee(n){let t="";do t=Ue[n%Wt]+t,n=Math.floor(n/Wt);while(n>0);return t}function We(){const n=Ee(+new Date);return n!==we?(be=0,we=n):n+"."+Ee(be++)}for(;Tt<Wt;Tt++)vi[Ue[Tt]]=Tt;function je(n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t}function bi(n){let t={},e=n.split("&");for(let i=0,r=e.length;i<r;i++){let s=e[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}let Ke=!1;try{Ke=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wi=Ke;function Ye(n){const t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||wi))return new XMLHttpRequest}catch{}if(!t)try{return new G[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Ei(){}const Si=function(){return new Ye({xdomain:!1}).responseType!=null}();class ki extends Ve{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==i}const e=t&&t.forceBase64;this.supportsBinary=Si&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};ui(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,hi(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let i="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=We()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(e==="https"&&Number(this.opts.port)!==443||e==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port);const r=je(t),s=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new W(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}}class W extends L{constructor(t,e){super(),Mt(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.create()}create(){const t=Fe(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new Ye(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{e.readyState===4&&(e.status===200||e.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof e.status=="number"?e.status:0)},0))},e.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=W.requestsCount++,W.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Ei,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete W.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}W.requestsCount=0;W.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Se);else if(typeof addEventListener=="function"){const n="onpagehide"in G?"pagehide":"unload";addEventListener(n,Se,!1)}}function Se(){for(let n in W.requests)W.requests.hasOwnProperty(n)&&W.requests[n].abort()}const Je=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0))(),Ct=G.WebSocket||G.MozWebSocket,ke=!0,_i="arraybuffer",_e=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class xi extends Ve{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=_e?{}:Fe(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=ke&&!_e?e?new Ct(t,e):new Ct(t):new Ct(t,e,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType||_i,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],r=e===t.length-1;Me(i,this.supportsBinary,s=>{const a={};try{ke&&this.ws.send(s)}catch{}r&&Je(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let i="";this.opts.port&&(e==="wss"&&Number(this.opts.port)!==443||e==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=We()),this.supportsBinary||(t.b64=1);const r=je(t),s=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}check(){return!!Ct}}const Ai={websocket:xi,polling:ki},Ti=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ci=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jt(n){const t=n,e=n.indexOf("["),i=n.indexOf("]");e!=-1&&i!=-1&&(n=n.substring(0,e)+n.substring(e,i).replace(/:/g,";")+n.substring(i,n.length));let r=Ti.exec(n||""),s={},a=14;for(;a--;)s[Ci[a]]=r[a]||"";return e!=-1&&i!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Ri(s,s.path),s.queryKey=Oi(s,s.query),s}function Ri(n,t){const e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Oi(n,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,s){r&&(e[r]=s)}),e}let Qe=class ut extends L{constructor(t,e={}){super(),t&&typeof t=="object"&&(e=t,t=null),t?(t=jt(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=jt(e.host).host),Mt(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=bi(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=qe,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Ai[t](i)}open(){let t;if(this.opts.rememberUpgrade&&ut.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(t){let e=this.createTransport(t),i=!1;ut.priorWebsocketSuccess=!1;const r=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",g=>{if(!i)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;ut.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(p(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const C=new Error("probe error");C.transport=e.name,this.emitReserved("upgradeError",C)}}))};function s(){i||(i=!0,p(),e.close(),e=null)}const a=g=>{const C=new Error("probe error: "+g);C.transport=e.name,s(),this.emitReserved("upgradeError",C)};function h(){a("transport closed")}function d(){a("socket closed")}function c(g){e&&g.name!==e.name&&s()}const p=()=>{e.removeListener("open",r),e.removeListener("error",a),e.removeListener("close",h),this.off("close",d),this.off("upgrading",c)};e.once("open",r),e.once("error",a),e.once("close",h),this.once("close",d),this.once("upgrading",c),e.open()}onOpen(){if(this.readyState="open",ut.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(e+=gi(r)),i>0&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,r){if(typeof e=="function"&&(r=e,e=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const s={type:t,data:e,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){ut.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const r=t.length;for(;i<r;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};Qe.protocol=qe;function Li(n,t="",e){let i=n;e=e||typeof location<"u"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e<"u"?n=e.protocol+"//"+n:n="https://"+n),i=jt(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const s=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+t,i.href=i.protocol+"://"+s+(e&&e.port===i.port?"":":"+i.port),i}const Ni=typeof ArrayBuffer=="function",Bi=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Xe=Object.prototype.toString,Ii=typeof Blob=="function"||typeof Blob<"u"&&Xe.call(Blob)==="[object BlobConstructor]",Di=typeof File=="function"||typeof File<"u"&&Xe.call(File)==="[object FileConstructor]";function Zt(n){return Ni&&(n instanceof ArrayBuffer||Bi(n))||Ii&&n instanceof Blob||Di&&n instanceof File}function Nt(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,i=n.length;e<i;e++)if(Nt(n[e]))return!0;return!1}if(Zt(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Nt(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&Nt(n[e]))return!0;return!1}function Pi(n){const t=[],e=n.data,i=n;return i.data=Kt(e,t),i.attachments=t.length,{packet:i,buffers:t}}function Kt(n,t){if(!n)return n;if(Zt(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let i=0;i<n.length;i++)e[i]=Kt(n[i],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=Kt(n[i],t));return e}return n}function Mi(n,t){return n.data=Yt(n.data,t),delete n.attachments,n}function Yt(n,t){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=Yt(n[e],t);else if(typeof n=="object")for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=Yt(n[e],t));return n}const zi=5;var y;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(y||(y={}));class Hi{constructor(t){this.replacer=t}encode(t){return(t.type===y.EVENT||t.type===y.ACK)&&Nt(t)?this.encodeAsBinary({type:t.type===y.EVENT?y.BINARY_EVENT:y.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===y.BINARY_EVENT||t.type===y.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=Pi(t),i=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(i),r}}class te extends L{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const i=e.type===y.BINARY_EVENT;i||e.type===y.BINARY_ACK?(e.type=i?y.EVENT:y.ACK,this.reconstructor=new $i(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Zt(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(y[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===y.BINARY_EVENT||i.type===y.BINARY_ACK){const s=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const a=t.substring(s,e);if(a!=Number(a)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(a)}if(t.charAt(e+1)==="/"){const s=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(s,e)}else i.nsp="/";const r=t.charAt(e+1);if(r!==""&&Number(r)==r){const s=e+1;for(;++e;){const a=t.charAt(e);if(a==null||Number(a)!=a){--e;break}if(e===t.length)break}i.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){const s=this.tryParse(t.substr(e));if(te.isPayloadValid(i.type,s))i.data=s;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case y.CONNECT:return typeof e=="object";case y.DISCONNECT:return e===void 0;case y.CONNECT_ERROR:return typeof e=="string"||typeof e=="object";case y.EVENT:case y.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case y.ACK:case y.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $i{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=Mi(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const qi=Object.freeze(Object.defineProperty({__proto__:null,Decoder:te,Encoder:Hi,get PacketType(){return y},protocol:zi},Symbol.toStringTag,{value:"Module"}));function q(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const Fi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ge extends L{constructor(t,e,i){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[q(t,"open",this.onopen.bind(this)),q(t,"packet",this.onpacket.bind(this)),q(t,"error",this.onerror.bind(this)),q(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Fi.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');e.unshift(t);const i={type:y.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const a=this.ids++,h=e.pop();this._registerAckCallback(a,h),i.id=a}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){const i=this.flags.timeout;if(i===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);e.call(this,new Error("operation has timed out"))},i);this.acks[t]=(...s)=>{this.io.clearTimeoutFn(r),e.apply(this,[null,...s])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:y.CONNECT,data:t})}):this.packet({type:y.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case y.CONNECT:if(t.data&&t.data.sid){const r=t.data.sid;this.onconnect(r)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case y.EVENT:case y.BINARY_EVENT:this.onevent(t);break;case y.ACK:case y.BINARY_ACK:this.onack(t);break;case y.DISCONNECT:this.ondisconnect();break;case y.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,e.packet({type:y.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}function dt(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}dt.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=Math.floor(t*10)&1?n+e:n-e}return Math.min(n,this.max)|0};dt.prototype.reset=function(){this.attempts=0};dt.prototype.setMin=function(n){this.ms=n};dt.prototype.setMax=function(n){this.max=n};dt.prototype.setJitter=function(n){this.jitter=n};class Jt extends L{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Mt(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new dt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||qi;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Qe(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=q(e,"open",function(){i.onopen(),t&&t()}),s=q(e,"error",a=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",a),t?t(a):i.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&r();const h=this.setTimeoutFn(()=>{r(),e.close(),e.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&h.unref(),this.subs.push(function(){clearTimeout(h)})}return this.subs.push(r),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(q(t,"ping",this.onping.bind(this)),q(t,"data",this.ondata.bind(this)),q(t,"error",this.onerror.bind(this)),q(t,"close",this.onclose.bind(this)),q(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Je(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new Ge(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(r=>{r?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",r)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const gt={};function Bt(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=Li(n,t.path||"/socket.io"),i=e.source,r=e.id,s=e.path,a=gt[r]&&s in gt[r].nsps,h=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let d;return h?d=new Jt(i,t):(gt[r]||(gt[r]=new Jt(i,t)),d=gt[r]),e.query&&!t.query&&(t.query=e.queryKey),d.socket(e.path,t)}Object.assign(Bt,{Manager:Jt,Socket:Ge,io:Bt,connect:Bt});const $t=Bt(`ws://${window.location.hostname}:${window.location.port}`),Vi={background:"#133a2b",green:"#8da"},$=class{constructor(t,e){O(this,"name");O(this,"pos");O(this,"isMoving",[!1,!1,!1,!1]);O(this,"moveSpeed");this.name=t,this.pos=e,this.moveSpeed=$.DEFAULT_MOVE_SPEED}moves(t){switch(t){case"up":this.pos[1]-=this.moveSpeed;break;case"right":this.pos[0]+=this.moveSpeed;break;case"down":this.pos[1]+=this.moveSpeed;break;case"left":this.pos[0]-=this.moveSpeed;break;case"upRight":{this.pos[0]+=$.INVERSE_SQRT_2*this.moveSpeed,this.pos[1]-=$.INVERSE_SQRT_2*this.moveSpeed;break}case"upLeft":{this.pos[0]-=$.INVERSE_SQRT_2*this.moveSpeed,this.pos[1]-=$.INVERSE_SQRT_2*this.moveSpeed;break}case"downRight":{this.pos[0]+=$.INVERSE_SQRT_2*this.moveSpeed,this.pos[1]+=$.INVERSE_SQRT_2*this.moveSpeed;break}case"downLeft":{this.pos[0]-=$.INVERSE_SQRT_2*this.moveSpeed,this.pos[1]+=$.INVERSE_SQRT_2*this.moveSpeed;break}}}};let lt=$;O(lt,"DEFAULT_MOVE_SPEED",5),O(lt,"INVERSE_SQRT_2",.7071);const Ze=new Image,tn=new Image,en=new Image,nn=new Image,rn=new Image;Ze.src="images/stone.png";tn.src="images/player.png";en.src="images/gold.png";nn.src="images/tree.png";rn.src="images/craftingTable.png";const Ui={stone:Ze,player:tn,gold:en,tree:nn,craftingTable:rn},ft=class{constructor(){O(this,"fps",1e3/60);O(this,"canvas");O(this,"ctx");O(this,"width");O(this,"height");O(this,"halfWidth");O(this,"halfHeight");O(this,"halfSize",ft.CUBE_SIZE/2);O(this,"mapLoaded",!1);O(this,"map");O(this,"player");$t.on("debug",t=>{console.log(t)}),this.handleKeys(),this.canvas=document.getElementById("canvas"),this.canvas.getContext?(this.ctx=this.canvas.getContext("2d"),this.width=200,this.height=200,this.width=100,this.height=100,$t.on("map",t=>{this.map=t,this.mapLoaded=!0;const e=window.localStorage.getItem(ft.PLAYER_INFO);if(e){const i=JSON.parse(e);this.player=new lt(i.name,i.pos)}else this.player=new lt("Unnamed",[0,0]);setInterval(()=>{this.update()},this.fps)}),$t.emit("getMap",{})):console.error("Canvas not supported")}update(){this.handlePlayerMove(),this.render()}render(){this.drawBackground(),this.drawProps(),this.drawPlayer()}drawBackground(){this.ctx.fillStyle=Vi.background,this.ctx.fillRect(0,0,this.width,this.height)}drawPlayer(){this.drawProp("player",[this.halfWidth,this.halfHeight])}drawProps(){this.map.props.forEach(t=>{this.isInScreen(t.pos)&&this.drawProp(t.name,this.plot(t.pos))})}drawProp(t,e){this.ctx.drawImage(Ui[t],e[0],e[1])}isInScreen(t){return!0}plot(t){return[this.halfWidth-this.player.pos[0]+t[0]*ft.CUBE_SIZE,this.halfHeight-this.player.pos[1]+t[1]*ft.CUBE_SIZE]}resize(t,e){this.canvas&&(this.canvas.width=t,this.canvas.height=e,this.width=t,this.height=e,this.halfWidth=t/2-this.halfSize,this.halfHeight=e/2-this.halfSize)}handlePlayerMove(){const[t,e,i,r]=this.player.isMoving;t&&e?this.player.moves("upRight"):t&&r?this.player.moves("upLeft"):i&&e?this.player.moves("downRight"):i&&r?this.player.moves("downLeft"):(t&&this.player.moves("up"),e&&this.player.moves("right"),i&&this.player.moves("down"),r&&this.player.moves("left"))}canMove(t){return!0}handleKeys(){document.onkeydown=t=>{const e=t.key;e==="ArrowUp"&&(this.player.isMoving[0]=!0),e==="ArrowRight"&&(this.player.isMoving[1]=!0),e==="ArrowDown"&&(this.player.isMoving[2]=!0),e==="ArrowLeft"&&(this.player.isMoving[3]=!0)},document.onkeyup=t=>{const e=t.key;e==="ArrowUp"&&this.player.isMoving[0]&&(this.player.isMoving[0]=!1),e==="ArrowRight"&&this.player.isMoving[1]&&(this.player.isMoving[1]=!1),e==="ArrowDown"&&this.player.isMoving[2]&&(this.player.isMoving[2]=!1),e==="ArrowLeft"&&this.player.isMoving[3]&&(this.player.isMoving[3]=!1)}}};let vt=ft;O(vt,"PLAYER_INFO","playerInfo"),O(vt,"CUBE_SIZE",128);function Wi(n){let t,e,i;return{c(){t=Ce("div"),t.innerHTML='<canvas id="canvas"></canvas>',qt(t,"id","container"),qt(t,"class","svelte-1xcj36t")},m(r,s){Te(r,t,s),e||(i=mn(ei.call(null,t,n[0])),e=!0)},p:Z,i:Z,o:Z,d(r){r&&Xt(t),e=!1,i()}}}function ji(n){let t,e;wn(async()=>{t=document.getElementById("container"),setTimeout(()=>{e=new vt},50),setTimeout(()=>{i()},100)});function i(){e&&e.resize(t.offsetWidth,t.offsetHeight)}return[i]}class Ki extends Ie{constructor(t){super(),Be(this,t,ji,Wi,Ae,{})}}function Yi(n){let t,e,i;return e=new Ki({}),{c(){t=Ce("div"),An(e.$$.fragment),qt(t,"class","all svelte-1z0s9za")},m(r,s){Te(r,t,s),Le(e,t,null),i=!0},p:Z,i(r){i||(Oe(e.$$.fragment,r),i=!0)},o(r){xn(e.$$.fragment,r),i=!1},d(r){r&&Xt(t),Ne(e)}}}class Ji extends Ie{constructor(t){super(),Be(this,t,null,Yi,Ae,{})}}new Ji({target:document.getElementById("app")});
